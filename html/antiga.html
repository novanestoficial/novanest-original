<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Header com Sistema de Carrinho</title>
    <!--LOGO-->
    <link rel="shortcut icon" href="../imagens/logos/logo-principal.png" type="imagens/logos/logo-principal.png">
    <!--fim da logo-->

       <!--Separando cada css de cada item-->
    <link rel="stylesheet" href="../css/div-pasta-index/header.css">
    <link rel="stylesheet" href="../css/div-pasta-index/banners.css">
    <link rel="stylesheet" href="../css/div-pasta-index/desconto-title.css">
    <link rel="stylesheet" href="../css/div-pasta-index/produtos-carrosel.css">
    <link rel="stylesheet" href="../css/div-pasta-index/modal-produtos.css">
    <link rel="stylesheet" href="../css/div-pasta-index/modal-cart.css">
    <link rel="stylesheet" href="../css/div-pasta-index/pop-up-sucess.css">
    <link rel="stylesheet" href="../css/div-pasta-index/responsividade.css">
    <link rel="stylesheet" href="../css/div-pasta-index/keyframes-animations.css">
    <!--Fim da separação-->

    <!--links css-->
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=phone_enabled" />
    <link rel="stylesheet" href="../css/login-icon.css">
    <!--FIM DOS LINKS CSS-->

</head>

<body>


    <header class="header">



        <!-- MENU -->
        <ul class="nav-menu" id="navMenu">
            <li><a href="#">Calças</a></li>
            <li><a href="#">Camisas</a></li>
            <li><a href="#">Tenis</a></li>
            <li><a href="#">Bonés</a></li>
            <li><a href="#">Acessórios</a></li>
            <li><a href="#">Bermudas</a></li>
            <li><a href="#">Conjuntos</a></li>
            <li><a href="#">Moletom</a></li>
            <li><a href="#">Relógios</a></li>
            <li><a href="#">Cintos</a></li>
            <li><a href="#">Perfumes</a></li>
        </ul>

        <!-- FIM DO MENU -->


        <!--BARRA DE PESQUISA, LOGIN E CARRINHO-->

        <div class="header-actions">
            <div class="search-box">
                <input type="text" placeholder="Pesquisar...">
                <button><i class="fas fa-search"></i></button>
            </div>



            <div class="login-icon-container">
                <button class="login-icon icon-btn" id="loginIcon">
                    <i class="fas fa-user"></i>
                </button>

                <div class="login-status" id="loginStatus"></div>
            </div>




            <div class="login-icon-container">
                <button class="icon-btn" id="cartBtn">
                    <i class="fas fa-shopping-cart"></i>
                    <div class="badge" id="cartBadge">0</div>
                </button>

                <div class="cart-dropdown" id="cartDropdown">
                    <div class="cart-header">
                        <h3>Seu Carrinho</h3>
                        <button class="close-cart" id="closeCart">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <div class="cart-items" id="cartItems">
                        <!-- Itens do carrinho serão adicionados aqui via JavaScript -->
                    </div>

                    <div class="cart-footer">
                        <div class="cart-total">
                            <span>Total:</span>
                            <span id="cartTotal">R$ 0,00</span>
                        </div>
                        <div class="cart-actions">
                            <a href="carrinho.html" class="btn btn-view-cart">Ver Carrinho</a>
                            <a href="carrinho.html" class="btn btn-checkout">Finalizar Compra</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!--FIM DA ABA,LOGIN E CARRINHO-->

</header>


        <!-- CARROSSEL -->
        <div class="carrossel">
            <div class="slides">
                <picture>
                    <source media="(max-width: 500px)" srcset="imagens/banners/promocoes/imagem-promocoes-pequena.png">
                    <source media="(max-width: 768px)" srcset="imagens/banners/promocoes/imagem-promocoes-media.png">
                    <img src="../imagens/banners/promocoes/imagem-promocoes-grande.png" alt="Promoções">
                </picture>

                <img class="banners-pequenos" src="../imagens/banners/1.png" alt="img-1">

                <picture>
                    <source media="(max-width: 500px)" srcset="imagens/banners/novidades/imagem-novidades-pequena.png">
                    <source media="(max-width: 768px)" srcset="imagens/banners/novidades/imagem-novidades-media.png">
                    <img src="../imagens/banners/novidades/imagem-novidades-grande.png" alt="Novidades">
                </picture>

                <img class="banners-pequenos" src="../imagens/banners/2.png" alt="img-2">

            </div>

            <div class="indicadores">
                <div class="ativo"></div>
                <div></div>
            </div>
        </div>

        <!--FIM DO CARROSSEL-->

<!--DESCONTO-->
  <h1 id="desconto">GANHE 10% DE DESCONTO PAGANDO NO PIX!</h1>
  <!--FIM DO DESCONTO-->
    

    <main>
        <div class="products-container" id="lista-produtos"></div>
    </main>

    <!--Parte de funções da barra de pesquisa,e carrinho-->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Estado do carrinho
            let cart = [];

            // Produtos de exemplo
            const products = [

            ];

            // Elementos DOM
            const cartBtn = document.getElementById('cartBtn');
            const cartDropdown = document.getElementById('cartDropdown');
            const closeCart = document.getElementById('closeCart');
            const cartItems = document.getElementById('cartItems');
            const cartBadge = document.getElementById('cartBadge');
            const cartTotal = document.getElementById('cartTotal');
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const navMenu = document.getElementById('navMenu');

            // Adicionar produto ao carrinho (função de exemplo)
            function addToCart(productId) {
                const product = products.find(p => p.id === productId);

                if (product) {
                    const existingItem = cart.find(item => item.id === productId);

                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        cart.push({
                            id: product.id,
                            name: product.name,
                            price: product.price,
                            quantity: 1,
                            icon: product.icon
                        });
                    }

                    updateCart();

                    // Mostrar o carrinho quando um item é adicionado
                    cartDropdown.classList.add('active');
                }
            }

            // Remover produto do carrinho
            function removeFromCart(productId) {
                cart = cart.filter(item => item.id !== productId);
                updateCart();
            }

            // Atualizar quantidade do produto no carrinho
            function updateQuantity(productId, newQuantity) {
                if (newQuantity < 1) {
                    removeFromCart(productId);
                    return;
                }

                const item = cart.find(item => item.id === productId);
                if (item) {
                    item.quantity = newQuantity;
                    updateCart();
                }
            }

            // Calcular total do carrinho
            function calculateTotal() {
                return cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            }

            // Atualizar interface do carrinho
            function updateCart() {
                // Atualizar badge
                const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
                cartBadge.textContent = totalItems;

                // Atualizar itens do carrinho
                if (cart.length > 0) {
                    let cartHTML = '';

                    cart.forEach(item => {
                        cartHTML += `
                            <div class="cart-item">
                                <div class="item-image">
                                    <i class="fas ${item.icon}"></i>
                                </div>
                                <div class="item-details">
                                    <div class="item-name">${item.name}</div>
                                    <div class="item-price">R$ ${item.price.toFixed(2)}</div>
                                    <div class="item-quantity">
                                        <button class="quantity-btn minus" data-id="${item.id}">-</button>
                                        <span class="quantity">${item.quantity}</span>
                                        <button class="quantity-btn plus" data-id="${item.id}">+</button>
                                        <button class="remove-item" data-id="${item.id}">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                    });

                    cartItems.innerHTML = cartHTML;
                } else {
                    cartItems.innerHTML = `
                        <div class="empty-cart">
                            <i class="fas fa-shopping-cart"></i>
                            <p>Seu carrinho está vazio</p>
                        </div>
                    `;
                }

                // Atualizar total
                cartTotal.textContent = `R$ ${calculateTotal().toFixed(2)}`;

                // Adicionar eventos aos botões do carrinho
                document.querySelectorAll('.quantity-btn.minus').forEach(button => {
                    button.addEventListener('click', function () {
                        const productId = parseInt(this.getAttribute('data-id'));
                        const item = cart.find(item => item.id === productId);
                        if (item) {
                            updateQuantity(productId, item.quantity - 1);
                        }
                    });
                });

                document.querySelectorAll('.quantity-btn.plus').forEach(button => {
                    button.addEventListener('click', function () {
                        const productId = parseInt(this.getAttribute('data-id'));
                        const item = cart.find(item => item.id === productId);
                        if (item) {
                            updateQuantity(productId, item.quantity + 1);
                        }
                    });
                });

                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', function () {
                        const productId = parseInt(this.getAttribute('data-id'));
                        removeFromCart(productId);
                    });
                });
            }

            // Inicializar o carrinho
            updateCart();

         

            // Alternar a exibição do carrinho
            cartBtn.addEventListener('click', function () {
                cartDropdown.classList.toggle('active');
            });

            // Fechar o carrinho
            closeCart.addEventListener('click', function () {
                cartDropdown.classList.remove('active');
            });

            // Fechar o carrinho ao clicar fora
            document.addEventListener('click', function (event) {
                if (!cartBtn.contains(event.target) && !cartDropdown.contains(event.target)) {
                    cartDropdown.classList.remove('active');
                }
            });

            // Menu mobile
            mobileMenuBtn.addEventListener('click', function () {
                navMenu.classList.toggle('active');
            });

        });
    </script>


    <!--Parte De LOGIN ICON-->

    <script>
document.addEventListener("DOMContentLoaded", () => {

    // Carrega o usuário salvo no navegador
    let user = JSON.parse(localStorage.getItem("user")) || { logged: false };

    const icon = document.getElementById("loginIcon");
    const statusBox = document.getElementById("loginStatus");

    function updateStatus() {
        if (user.logged) {
            // ---- Usuário logado ----
            statusBox.innerHTML = `
                <div class="status-header logged-in">
                    <div class="status-icon"><i class="fas fa-check"></i></div>
                    <div>
                        <h3 class="logado">Logado</h3>
                        <p class= "email-login">${user.email}</p>
                    </div>
                </div>

                <div class="user-info">
                    <p><strong>Nome:</strong> ${user.name}</p>
                </div>

                <button class="btn btn-logout" id="logoutBtn">Sair</button>
            `;

            // Botão de sair
            document.getElementById("logoutBtn").onclick = () => {
                localStorage.removeItem("user");  
                user = { logged: false };
                updateStatus();
                statusBox.classList.remove("active");
            };

        } else {
            // ---- Usuário NÃO logado ----
            statusBox.innerHTML = `
                <div class="status-header logged-out">
                    <div class="status-icon"><i class="fas fa-times"></i></div>
                    <div class="div-login">
                        <h3>Desconectado</h3>
                        <p>Você não está logado</p>
                    </div>
                </div>

                <a href="login-page.html">
                    <button class="btn btn-login">Fazer Login</button>
                </a>
                <a href="login-page.html">
                    <button class="btn btn-register">Cadastrar</button>
                </a>
            `;
        }
    }

    updateStatus();

    // Abrir/fechar o status
    icon.onclick = () => {
        statusBox.classList.toggle("active");
    };

    // Fechar clicando fora
    document.addEventListener("click", (e) => {
        if (!icon.contains(e.target) && !statusBox.contains(e.target)) {
            statusBox.classList.remove("active");
        }
    });

});
</script>

<!--FIM DA PARTE DE LOGIN-->


    <!--Atualiza a aba ao logar-->

    <script>
        document.addEventListener("DOMContentLoaded", function () {

            const user = JSON.parse(localStorage.getItem("user"));

            if (user && user.logged === true) {

                const icon = document.getElementById("loginIcon");

                if (icon) {
                    // Torna o ícone verde mostrando que está logado
                    icon.style.backgroundColor = "#4caf50";
                    icon.style.color = "#fff";

                    // Opcional: colocar um check no lugar do usuário
                    icon.innerHTML = '<i class="fas fa-check"></i>';
                }
            }

        });
    </script>
    
    <!--FIM DA PARTE DE ATUALIZAÇÃO DE LOGIN-->


   

    <!--Parte dos SLIDES NO HEADER-->

    <script>
        document.querySelectorAll('.carrossel').forEach((carrossel) => {
            const faixa = carrossel.querySelector('.slides'); // container flex
            const indicadoresContainer = carrossel.querySelector('.indicadores');
            if (!faixa || !indicadoresContainer) return;

            const items = Array.from(faixa.children); // children podem ser <img> ou <picture>
            const indicadores = Array.from(indicadoresContainer.children);

            // se o número de indicadores não bater com o número de slides, recria-los
            if (indicadores.length !== items.length) {
                indicadoresContainer.innerHTML = '';
                items.forEach((_, i) => {
                    const dot = document.createElement('div');
                    if (i === 0) dot.classList.add('ativo');
                    indicadoresContainer.appendChild(dot);
                });
            }

            const dots = Array.from(indicadoresContainer.children);

            let index = 0;
            let tempoTroca = 5000; // tempo em ms — altere para o que quiser
            let intervalo;

            function aplicarTransform() {
                // cada item ocupa 100% do carrossel; usaremos -index * 100%
                faixa.style.transform = `translateX(${-index * 100}%)`;
                dots.forEach((d, i) => d.classList.toggle('ativo', i === index));
            }

            function iniciarIntervalo() {
                clearInterval(intervalo);
                intervalo = setInterval(() => {
                    index = (index + 1) % items.length;
                    aplicarTransform();
                }, tempoTroca);
            }

            // inicializa
            aplicarTransform();
            iniciarIntervalo();

            // clicar em bolinhas
            dots.forEach((bolinha, i) => {
                bolinha.addEventListener('click', () => {
                    index = i;
                    aplicarTransform();
                    // reinicia o intervalo (pausa e recomeça)
                    iniciarIntervalo();
                });
            });

            // Optional: swipe touch (mobile) — implementa arrastar simples
            let startX = 0;
            let isDragging = false;
            faixa.addEventListener('touchstart', (e) => {
                clearInterval(intervalo);
                startX = e.touches[0].clientX;
                isDragging = true;
            });
            faixa.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                const delta = e.touches[0].clientX - startX;
                // movimenta provisoriamente para dar feedback (sem alterar index)
                faixa.style.transition = 'none';
                faixa.style.transform = `translateX(${-index * 100 + (delta / carrossel.clientWidth) * 100}%)`;
            });
            faixa.addEventListener('touchend', (e) => {
                if (!isDragging) return;
                const endX = e.changedTouches[0].clientX;
                const diff = endX - startX;
                faixa.style.transition = ''; // restaura transição do CSS
                if (Math.abs(diff) > 50) {
                    if (diff < 0) index = (index + 1) % items.length; // swipe para esquerda -> próxima
                    else index = (index - 1 + items.length) % items.length; // swipe para direita -> anterior
                }
                aplicarTransform();
                isDragging = false;
                iniciarIntervalo();
            });

            // redimensionamento: garante transform correto se tamanho mudar
            window.addEventListener('resize', aplicarTransform);
        });
    </script>

<!--FIM DO SLIDE-->

    <!--Parte dos SLIDES produtos-->

    <script>
        document.querySelectorAll('.carrossel').forEach((carrossel) => {
            const faixa = carrossel.querySelector('.slides'); // container flex
            const indicadoresContainer = carrossel.querySelector('.indicadores');
            if (!faixa || !indicadoresContainer) return;

            const items = Array.from(faixa.children); // children podem ser <img> ou <picture>
            const indicadores = Array.from(indicadoresContainer.children);

            // se o número de indicadores não bater com o número de slides, recria-los
            if (indicadores.length !== items.length) {
                indicadoresContainer.innerHTML = '';
                items.forEach((_, i) => {
                    const dot = document.createElement('div');
                    if (i === 0) dot.classList.add('ativo');
                    indicadoresContainer.appendChild(dot);
                });
            }

            const dots = Array.from(indicadoresContainer.children);

            let index = 0;
            let tempoTroca = 5000; // tempo em ms — altere para o que quiser
            let intervalo;

            function aplicarTransform() {
                // cada item ocupa 100% do carrossel; usaremos -index * 100%
                faixa.style.transform = `translateX(${-index * 100}%)`;
                dots.forEach((d, i) => d.classList.toggle('ativo', i === index));
            }

            function iniciarIntervalo() {
                clearInterval(intervalo);
                intervalo = setInterval(() => {
                    index = (index + 1) % items.length;
                    aplicarTransform();
                }, tempoTroca);
            }

            // inicializa
            aplicarTransform();
            iniciarIntervalo();

            // clicar em bolinhas
            dots.forEach((bolinha, i) => {
                bolinha.addEventListener('click', () => {
                    index = i;
                    aplicarTransform();
                    // reinicia o intervalo (pausa e recomeça)
                    iniciarIntervalo();
                });
            });

            // Optional: swipe touch (mobile) — implementa arrastar simples
            let startX = 0;
            let isDragging = false;
            faixa.addEventListener('touchstart', (e) => {
                clearInterval(intervalo);
                startX = e.touches[0].clientX;
                isDragging = true;
            });
            faixa.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                const delta = e.touches[0].clientX - startX;
                // movimenta provisoriamente para dar feedback (sem alterar index)
                faixa.style.transition = 'none';
                faixa.style.transform = `translateX(${-index * 100 + (delta / carrossel.clientWidth) * 100}%)`;
            });
            faixa.addEventListener('touchend', (e) => {
                if (!isDragging) return;
                const endX = e.changedTouches[0].clientX;
                const diff = endX - startX;
                faixa.style.transition = ''; // restaura transição do CSS
                if (Math.abs(diff) > 50) {
                    if (diff < 0) index = (index + 1) % items.length; // swipe para esquerda -> próxima
                    else index = (index - 1 + items.length) % items.length; // swipe para direita -> anterior
                }
                aplicarTransform();
                isDragging = false;
                iniciarIntervalo();
            });

            // redimensionamento: garante transform correto se tamanho mudar
            window.addEventListener('resize', aplicarTransform);
        });
    </script>

<!--FIM DO SLIDE produtos-->

  <!-- Banco de Dados-->

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    // Configurações reais do seu Firebase
    const firebaseConfig = {
      apiKey: "SUA_API_KEY_AQUI",
      authDomain: "loja-roupas-bb4bd.firebaseapp.com",
      databaseURL: "https://loja-roupas-bb4bd-default-rtdb.firebaseio.com/",
      projectId: "loja-roupas-bb4bd",
      storageBucket: "loja-roupas-bb4bd.appspot.com",
      messagingSenderId: "SEU_SENDER_ID",
      appId: "SEU_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const produtosRef = ref(db, 'produtos');
    const container = document.getElementById('lista-produtos');

    get(produtosRef)
      .then((snapshot) => {
        if (snapshot.exists()) {
          const produtos = snapshot.val();
          container.innerHTML = '';

          for (let id in produtos) {
            const p = produtos[id];

            const card = `
            <a href="pagina-de-compra.html?id=${id}">
              <div class="product-card">
                <img src="${p.imagem}" alt="${p.nome}" class="product-image">
                </div>
                <h3 class="product-name">${p.nome}</h3>
                <p class="product-price">
                  <span class="preco-antigo">${p.precoAntigo}</span>
                  <span class="preco-novo">${p.precoNovo}</span>
                  <span class="parcelas">${p.parcelas}</span>
                </p>
                </a>
          `;

            container.innerHTML += card;
          }
        } else {
          container.innerHTML = '<p>Nenhum produto encontrado.</p>';
        }
      })
      .catch((error) => {
        console.error('Erro ao carregar produtos:', error);
        container.innerHTML = '<p>Erro ao carregar produtos.</p>';
      });
  </script>

<!--FIM DO BANCO DE DADOS-->


<!-- INÍCIO DO RODAPÉ-->
   <footer>
    <div class="footer-container">
      <div class="footer-section">
        <div class="div-contato">
          <h3 class="contato">Contato</h3>
          <div class="contact-info">

<div class="div-telefone-email">

            <p><i class="far fa-envelope"></i>novanestoficial10@gmail.com</p>
            <p class="telefone">   <svg class="icon-telefone" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0  -960 960 960"
              width="24px" fill="#ffff">
              <path
                d="M162-120q-18 0-30-12t-12-30v-162q0-13 9-23.5t23-14.5l138-28q14-2 28.5 2.5T342-374l94 94q38-22 72-48.5t65-57.5q33-32 60.5-66.5T681-524l-97-98q-8-8-11-19t-1-27l26-140q2-13 13-22.5t25-9.5h162q18 0 30 12t12 30q0 125-54.5 247T631-329Q531-229 409-174.5T162-120Zm556-480q17-39 26-79t14-81h-88l-18 94 66 66ZM360-244l-66-66-94 20v88q41-3 81-14t79-28Zm358-356ZM360-244Z" />
            </svg> +55 (31) 9 7152-1813</p>
          </div>
        </div>
      
</div>
      </div>

      <div class="footer-section">
        <h3>Redes Sociais</h3>
        <p>Fique por dentro das novidades, promoções e lançamentos seguindo nossas redes sociais.</p>
        <div class="social-links">
          <a href="https://www.instagram.com/novanest_oficial?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="
            class="social-link" target="_blank" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://www.tiktok.com/@novanest_oficial?is_from_webapp=1&sender_device=pc"
            class="social-link tiktok" target="_blank" aria-label="TikTok">
            <i class="fab fa-tiktok"></i>
          </a>


        </div>
      </div>

      <div class="footer-section">
        <h3>Garantia e Direitos</h3>
        <p>Todos os nossos produtos possuem garantia contra defeitos de fabricação. Consulte o prazo e condições
          específicas para cada produto.</p>
        <div class="badges">
          <div class="badge">
            <i class="fas fa-shield-alt"></i>
            <span>Garantia do Produto</span>
          </div>
          <div class="badge">
            <i class="far fa-copyright"></i>
            <span>Direitos Reservados</span>
          </div>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <div class="copyright">
        <p>© 2025 Nova Nest.</p>
      </div>
      <div class="legal-links">
        <a href="#">Política de Privacidade</a>
        <a href="#">Termos de Uso</a>
        <a href="#">Política de Trocas</a>
      </div>
    </div>

    <div class="footer-links-div">
      <a class="links-footer" href="">Home</a>

    </div>


  </footer>
  <!--FIM DO RODAPÉ-->
</body>

</html>